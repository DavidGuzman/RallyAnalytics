<html><head><title>Analytics 2.0 Lookback API Getting Started Guide</title><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=lhDjYqiy3mZ0x6ROQEUoUw');ol{margin:0;padding:0}.c0{list-style-type:disc;margin:0;padding:0}.c2{padding-left:0pt;direction:ltr;margin-left:36pt}.c15{list-style-type:decimal;margin:0;padding:0}.c4{color:inherit;text-decoration:inherit}.c6{direction:ltr;margin-left:36pt}.c3{direction:ltr;margin-left:18pt}.c17{max-width:517.5pt;padding:72pt 40.5pt 72pt 54pt}.c5{color:#222222;font-family:"Courier New"}.c8{color:#1155cc;text-decoration:underline}.c19{text-indent:36pt}.c9{font-weight:bold}.c18{margin-left:72pt}.c16{font-family:"Consolas"}.c7{font-family:"Courier New"}.c10{color:#222222}.c13{margin-right:-9pt}.c12{height:11pt}.c11{direction:ltr}.c14{margin-left:54pt}.c1{background-color:#ffffff}.title{padding-top:24pt;line-height:1.15;text-align:left;color:#000000;font-size:36pt;font-family:"Arial";font-weight:bold;padding-bottom:6pt}.subtitle{padding-top:18pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:24pt;font-family:"Georgia";padding-bottom:4pt}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:24pt;line-height:1.15;text-align:left;color:#000000;font-size:24pt;font-family:"Arial";font-weight:bold;padding-bottom:6pt}h2{padding-top:18pt;line-height:1.15;text-align:left;color:#000000;font-size:18pt;font-family:"Arial";font-weight:bold;padding-bottom:4pt}h3{padding-top:14pt;line-height:1.15;text-align:left;color:#000000;font-size:14pt;font-family:"Arial";font-weight:bold;padding-bottom:4pt}h4{padding-top:12pt;line-height:1.15;text-align:left;color:#000000;font-size:12pt;font-family:"Arial";font-weight:bold;padding-bottom:2pt}h5{padding-top:11pt;line-height:1.15;text-align:left;color:#000000;font-size:11pt;font-family:"Arial";font-weight:bold;padding-bottom:2pt}h6{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:10pt;font-family:"Arial";font-weight:bold;padding-bottom:2pt}</style></head><body class="c1 c17"><h1 class="c11"><a name="h.isbcbplgns3b"></a><span>Rally Lookback API Getting Started Guide</span></h1><p class="c11"><span class="c8"><a class="c4" href="https://docs.google.com/a/rallydev.com/document/d/1QySvFx9L9dsXf2ULgJzAE2GjhYv56RSWhWHF87oyX4M/edit">ORIGINAL DOCUMENT</a></span><span>&nbsp;(must have rallydev.com email to access)</span></p><p class="c12 c11"><span></span></p><p class="c3"><span class="c8"><a class="c4" href="#h.isbcbplgns3b">Rally Lookback API Getting Started Guide</a></span></p><p class="c6"><span class="c8"><a class="c4" href="#h.uw29wij0t8kd">Purpose and caveats</a></span></p><p class="c6"><span class="c8"><a class="c4" href="#h.w2wj2gj251kp">Documentation</a></span></p><p class="c6"><span class="c8"><a class="c4" href="#h.j0m8ag3vzr0c">How to access</a></span></p><p class="c11 c14"><span class="c8"><a class="c4" href="#h.ho920x6orvmw">Querying via GET</a></span></p><p class="c11 c14"><span class="c8"><a class="c4" href="#h.ybe8qfn1ummw">Querying via POST</a></span></p><p class="c6"><span class="c8"><a class="c4" href="#h.engxa3kfrir4">Limitations:</a></span></p><p class="c6"><span class="c8"><a class="c4" href="#h.u8hp3yhikf2u">Endpoints</a></span></p><p class="c6"><span class="c8"><a class="c4" href="#h.moywkdo7gfy8">Additional functionality as of 2012-03-11</a></span></p><p class="c6"><span class="c8"><a class="c4" href="#h.fodrhovf6xwf">Backward breaking changes as of 2012-03-11</a></span></p><h2 class="c11"><a name="h.uw29wij0t8kd"></a><span>Purpose and caveats</span></h2><p class="c11"><span>The </span><span class="c9">purpose</span><span>&nbsp;of this early-access preview is two-fold:</span></p><ol class="c15" start="1"><li class="c2"><span class="c9">To provide Rally customers with a chance to start building Apps</span><span>&nbsp;upon this new powerful API. Several of our customers in this early-access were holding off on upgrading their existing Rally Apps because it is much easier to do certain things with this new API. We know it will take a little while for you to roll new functionality out to your Rally users and wanted to give you a head-start on that.</span></li><li class="c2"><span class="c9">To give us early feedback from actual usage</span><span>. This is a new data model and stack (MongoDB) for Rally and we want a chance to work out the bumps with our closest partners before rolling it out to everyone. This early-access preview is very much in the spirit of Agile&#39;s &quot;learning by doing&quot; approach.</span></li></ol><p class="c12 c11"><span></span></p><p class="c11"><span>Due to the nature of this being an early-access preview (some might use the term Alpha), there are a few </span><span class="c9">caveats</span><span>, you want to keep in mind:</span></p><ol class="c15" start="1"><li class="c2"><span class="c9">We know of a few things that don&#39;t work as expected</span><span>&nbsp;(see Limitations section below) </span><span class="c9">and we&#39;re still finding more</span><span>. Most of the unexpected behavior we are finding now is related to edge cases with the way Rally reports changes to the Analytics engine. We are dealing with most of them as they come up but some of them require changes to Rally that could take a while to resolve.</span></li><li class="c2"><span class="c9">You will see debug information (stack traces) that will eventually be hidden behind an error response.</span></li><li class="c2"><span class="c9">We will take the service down from time to time</span><span>&nbsp;to load a new version and modify the data model. Feel free to email me at </span><span class="c8"><a class="c4" href="mailto:Larry.Maccherone@rallydev.com">Larry.Maccherone@rallydev.com</a></span><span>&nbsp;if the services is non-responsive.</span></li><li class="c2"><span class="c9">We are still adding functionality and we may still make backward breaking changes</span><span>&nbsp;if we find features that don&#39;t hold up under load or introduce some risk.</span></li></ol><h2 class="c11"><a name="h.w2wj2gj251kp"></a><span>Documentation</span></h2><p class="c11"><span>The hub for documentation about this effort is on GitHub at </span><span class="c8"><a class="c4" href="https://github.com/RallyApps/rally_analytics">https://github.com/RallyApps/rally_analytics</a></span></p><h2 class="c11"><a name="h.j0m8ag3vzr0c"></a><span>How to access</span></h2><h3 class="c11"><a name="h.ho920x6orvmw"></a><span>Querying via GET</span></h3><p class="c11"><span class="c7 c1">https://</span><span class="c7 c1">rally1.rallydev.com/</span><span class="c7">analytics/1.27/</span><span class="c9 c7 c1">41529001</span><span class="c7">/artifact/snapshot/</span><span class="c7 c1">query.js?find={ObjectID:</span><span class="c5 c9 c1">1443125795</span><span class="c7 c1">} </span></p><p class="c11 c12"><span class="c1"></span></p><p class="c11"><span class="c1">where </span><span class="c9 c1">41529001</span><span class="c1">&nbsp;is the ObjectID of the workspace and </span><span class="c9 c10 c1">1443125795 </span><span class="c1 c10">is the ObjectID of some work item (User Story, Defect, etc.) in your workspace.</span></p><p class="c12 c11 c19"><span class="c1"></span></p><p class="c11"><span class="c1">All endpoints respond to both GET and POST.</span></p><h3 class="c11"><a name="h.ybe8qfn1ummw"></a><span>Querying via</span><span>&nbsp;POST</span></h3><p class="c11"><span>You can use a Chrome plugin named XHR Poster or some other &quot;Poster&quot; plugin for your browser to try POSTs</span></p><p class="c12 c11"><span></span></p><p class="c11"><span class="c9 c10 c1">URL</span><span class="c9 c10 c1">:</span></p><p class="c11 c13"><span class="c7 c1">https://rally1.rallydev.com/</span><span class="c7">analytics/1.27/</span><span class="c7 c1">41529001</span><span class="c7">/artifact/snapshot/</span><span class="c7 c1">query.js</span></p><p class="c12 c11"><span class="c9 c10 c1"></span></p><p class="c11"><span class="c9 c10 c1">Content-Type</span><span class="c9 c10 c1">:</span><span class="c10 c1">&nbsp;</span><span class="c5 c1">application/json</span></p><p class="c12 c11"><span class="c9 c10 c1"></span></p><p class="c11"><span class="c9 c10 c1">Body</span><span class="c9 c10 c1">:</span></p><p class="c11"><span class="c1 c5">{</span></p><p class="c11"><span class="c5 c1">&nbsp; &nbsp;&quot;find&quot;: { &quot;ObjectID&quot;: 1443125795 },</span></p><p class="c11"><span class="c5 c1">&nbsp; &nbsp;&quot;fields&quot;: true</span></p><p class="c11"><span class="c5 c1">}</span></p><p class="c12 c11"><span class="c10 c1 c16"></span></p><p class="c11"><span class="c10 c1">Use the &#39;POST&#39; button.</span></p><h2 class="c11"><a name="h.szs013y2wjs6"></a><span>Development gotchas and recommendations:</span></h2><ol class="c0" start="1"><li class="c2"><span class="c9">Cross-site browser restrictions to get the examples running. </span><span>Short term, start up your browser for testing with a flag to disable cross-site checks. For Chrome, you launch it by running:</span></li></ol><p class="c12 c11"><span></span></p><p class="c18 c11"><span class="c7">cd /Applications</span></p><p class="c18 c11"><span class="c7">open Google\ Chrome.app --args --disable-web-security</span></p><p class="c12 c11 c18"><span class="c7"></span></p><p class="c6"><span>Be sure to only use this for testing your own code as it makes you vulnerable to XSS attack.</span></p><ol class="c0" start="2"><li class="c2"><span class="c9">Authentication for node-based (command line) examples. </span><span>T</span><span>o get the minimal-node examples working, you&#39;ll need a way to provide credentials because it won&#39;t prompt like the browser. The recommended way to do that is to set RALLY_USER and RALLY_PASSWORD environment variables. That way, there is no risk that your password ends up in a file that accidentally gets committed to public repository. While you&#39;re setting environment variables, you may as well also set RALLY_WORKSPACE to the ObjectID of your workspace (41529001 for Rally).</span></li></ol><h2 class="c11"><a name="h.engxa3kfrir4"></a><span>L</span><span>imitations:</span></h2><ol class="c0" start="1"><li class="c2"><span>The Lookback API is only enabled for early-access participants. Other subscriptions in the works. We will ramp up availability based upon the feedback from early-access users.</span></li><li class="c2"><span>Double login. Your login to Rally proper is not known by the Lookback API. Your browser will prompt you to login again even if you access the Lookback API from inside of Rally.</span></li><li class="c2"><span>JSONP is not supported at this time. There were issues with using it in conjunction with basic authentication.</span></li><li class="c2"><span>When developing (any time you hit it from outside of Rally), you may not be able to hit the API from IE or other browsers that do not support CORS (IE 7 does not support CORS).</span></li><li class="c2"><span class="c1">We also have a bug where certain libraries (jQuery) send a pre-flight CORS request that we don&#39;t correctly process. The extent of this current limitation is not clearly understood at this point but the fix is in the works.</span></li><li class="c2"><span class="c1">For any artifact created between November and early April, boolean and numeric fields are not set in the first snapshot. This happened because they automatically default to false and 0 in our SQL database so Rally was not sending revision history transactions about them. We have this fixed moving forward. If you find a value like PlanEstimate or Blocked is missing, assume it is 0 or false respectively.</span></li><li class="c2"><span>Newly created custom fields will not be query-able by string name until the next midnight after creation. We hope to integrate this look-up into the continuous ETL, but for now, newly created custom fields will not be available until midnight. Similarly, changes to allowed values will not show up until midnight.</span></li><li class="c2"><span>Data starts on November 19.</span></li></ol><ol class="c0" start="1"><li class="c2"><span>Work item type prefixes (DE, S, US, TA, TC, PI, etc.) are currently hard coded when expanding queries against FormattedID, so if you&#39;ve changed them from the defaults (other than changing US to S), it will not work as expected. You can work around this by expanding into a query against _UnformattedID and _Type.</span></li><li class="c2"><span>No easy syntax for querying iterations and releases. Right now you&#39;ll need to query Rally&#39;s standard WSAPI first to figure out the ObjectID of all iterations and releases that apply. Each Project has its own copy of the iteration/release data so if you need all the iteration/release data below a specific Project, you&#39;ll need the ObjectIDs of all of those iterations/releases. We don&#39;t like this so we&#39;re exploring ways to hide that messiness on the analytics side.</span></li><li class="c2"><span>No disambiguation of Tag Names to ObjectIDs. For now, you&#39;ll need to provide the ObjectID for any queries against the Tags collection.</span></li><li class="c2"><span>Neither SSO nor LDAP will be supported.</span></li></ol><p class="c12 c11"><span></span></p></body></html>